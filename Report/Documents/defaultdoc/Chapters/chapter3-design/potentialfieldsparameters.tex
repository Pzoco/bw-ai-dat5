\section{Functions for the potential fields}
	This section will contain the functions, which will be used to calculate the potential of a field. Here is introduced some additional variables that 
	is going to be used in the functions.
	
	\label{cha3_variables}
	Variables:\\
	$c =$ A constant used to adjust the size of the different potential fields.\\ 
	$f_c =$ A force used to adjust the potential field.\\
	$wr =$ boolean denoting whether or not the weapons are ready to fire.\\
	$sr =$ units maximum shooting range.\\
	$da =$ distance from unit tile to nearest ally unit.\\
	$dua =$ distance from current tile\footnode{Current tile is the tile we are currently calculating the potential field for.} to nearest ally unit.\\
	$ds =$ distance from center of army to unit tile.\\
	$dsv =$ distance from center of army to current tile.\\
	$de =$ distance from unit tile to enemy.\\
	$due =$ distance from current tile to enemy.\\
	$dc =$ distance from unit tile to nearest cliff or edge. \\
	$duc =$ distance from current tile to nearest cliff or edge. 
	
	
	
	Where $f_c$ and $c$ is specific to each part of potential field, and named after each e.g. $f_{S}$ for force for the squad and $c_{squadSize}$ for the size of the squad.\\
	
	The following sections will contain the functions with a reasoning behind the different cases.
	
	\subsection*{Squad center (Attractive)}
		\label{SCA_label}A vulture is more likely to survive if it sticks together with its squad. 
		It will both give a better damage output and also spread out the damage taken
		\footnote{Each of the cases in the potential fields will be explained in detail in the implementation}.
		\begin{displaymath}
			SquadCenter  = \begin{cases}
					0 & \text{if } ds < c_{squadSize} \\
					f_{S} \times (2ds - dsv) & \text{if } ds >= c_{squadSize}
				\end{cases}		
		\end{displaymath}
		
	    The first case handles then the units are within the desired squad size. In that case we don't need to attract the units more towards the squad center.
	    
	    In the second case, the unit are outside the desired squad size, in that case we need to attract it towards the squad center.

        The calculation $(2ds - dsv)$ and other calculation with the same structure, is used to invert the distances see figure \ref{fig:cdist}. We need this because we cant just use the distance as it is, because the potential pointing away from the squad would be larger then the potentiel pointing towards the squad. $(2ds - dsv)$ changes the distance relative to the center and fixes this problem.    
        \insertmarginfigure{height=3in}{Potentialfields/CorrectedDistance.pdf}
		    {Correcting the distance}{fig:cdist}{-3in}
	\subsection*{Maximum distance positioning (Attractive)}
		The vultures have to utilize the their range, so they will be attracted to the position which gives them the maximum distance to the enemies.
		\begin{displaymath}
			MaximumDistancePositioning = \begin{cases}
					f_{MDP} \times (2de - due) & \text{if } de < sr\\
					0 & \text{if } de > sr\\
				\end{cases}		
		\end{displaymath}
		
		In the first case handle the case there we want to get closer to the enemies because we are not within shooting range.
		In the second case the unit is within range and don't need to get closer. One could argue that we need a third case to handle if we are getting to close, but this is handled by \textit{Weapon cool down}.
		
	\subsection*{Ally units (Repulsive)}
We do not want all of the vultures to clump completely together during a match. This can lead them vulnerable to splash damage attacks. If we keep the vulture spread out a reasonable distance the splash damage will not take any effect.
		\begin{displaymath}
			AllyUnits = \begin{cases}
					0 & \text{if } da > c_{allyDistance}\\
					-f_{AU} * (2da - dua) & \text{if } da < c_{allyDistance}
				\end{cases}		
		\end{displaymath}
	
	The first case handles when the unit is fare enough away from the enemies to not sustain splash damage, so we don't need to get further away.
	
	The other case is active when the units are to close and we need them to move away from each other.
	
	\subsection*{Weapon cool down (Repulsive)}
A vulture cannot do any damage right after it shoots. This is because in there is a certain amount of time in between each shot. Right after a vulture shoots we want it to move out of the battle until it can fire again. This way each vulture will be less vulnerable to taking damage when it cannot give any damage.
		\begin{displaymath}
			WeaponCoolDown = \begin{cases}
					0 & \text{if } wr\\
					-f_{WCD} * (2de - due) & \text{else}
				\end{cases}		
		\end{displaymath}

    WeaponCoolDown has two case, first for when the weapons are on cool down, in which case nothing happens. In the other case the weapons are on cool down, and we need to flee.        
    
	\subsection*{Edges and cliffs (Repulsive)}
		We do not want our vultures to get stuck against any walls so we will add a potential field for any edge where a unit can get stuck.
		\begin{displaymath}
			EdgesAndCliffs = \begin{cases}
					-f_{EAC} \times {(2*dc - due} & \text{if } dc < c_{edgeDistance}\\
					0 & \text{if } dc > c_{edgeDistance}
				\end{cases}		
		\end{displaymath}

    In case one we are to close the edges and need to move away. In the other case its not the case, and we do nothing.   

